{
  "hash": "070884b0f04adaafcb3ec4b08da84bc1",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Bar Charts and Histograms\ndate: today\ndate-format: long\nfooter: \"[IAFF 6501 Website](https://quant4ia.rocks)\"\nlogo: images/iaff6501-logo.png\nformat:\n  revealjs:\n    theme: [simple, custom.scss]\n    transition: fade\n    slide-number: true\n    #multiplex: true\n    chalkboard: true\nexecute:\n  echo: false\n  message: false\n  warning: false\n  freeze: auto\n---\n\n\n# Reading Data into R\n\n## Getting Started with Data {.smaller}\n\n<br>\n\n::: {.incremental}\n- *Tabular data* is data that is organized into rows and columns\n  - a.k.a. *rectangular data*\n- A *data frame* is a special kind of tabular data used in data science\n- A *variable* is something you can measure \n- An *observation* is a single unit or case in your data set\n- The *unit of analysis* is the level at which you are measuring\n  - In a cross-section: country, state, county, city, individual, etc.\n  - In a time-series: year, month, day, etc.\n:::\n\n## Example\n\n![](images/tidy_data.jpg){fig-align=\"center\"}\n\n## Some Basic R Code {.smaller}\n\n<br>\n\n::: {.incremental}\n- `<-` is the assignment operator\n  - Use it to assign values to objects\n- `#` is the comment operator\n  - Use it to comment out code or add comments\n  - Different function than in markdown text\n- To call a library, use `library()` and name of library\n  - name of library does not have to be in quotes, e.g. `library(readr)`\n  - only when you install it, e.g. `install.packages(\"readr\")`\n:::\n\n## Read Data into R\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"|1|2-3|5\"}\n# load libraries\nlibrary(readr)\nlibrary(dplyr)\n\ndem_summary <- read_csv(\"data/dem_summary.csv\")\n```\n:::\n\n\n## Viewing the Data in R\n\n<br>\n\nUse `glimpse()` to see the columns and data types:\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"7\"}\n# load libraries\nlibrary(readr)\nlibrary(dplyr)\n\ndem_summary <- read_csv(\"data/dem_summary.csv\")\n\nglimpse(dem_summary)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 6\nColumns: 5\n$ region    <chr> \"The West\", \"Latin America\", \"Eastern Europe\", \"Asia\", \"Afri…\n$ polyarchy <dbl> 0.8709230, 0.6371358, 0.5387451, 0.4076602, 0.3934166, 0.245…\n$ gdp_pc    <dbl> 37.913054, 9.610284, 12.176554, 9.746391, 4.410484, 21.134319\n$ flfp      <dbl> 52.99082, 48.12645, 50.45894, 50.32171, 56.69530, 26.57872\n$ women_rep <dbl> 28.12921, 21.32548, 17.99728, 14.45225, 17.44296, 10.21568\n```\n\n\n:::\n:::\n\n\n# \n\nOr use `View()` or click on the name of the object in your Environment tab to see the data in a spreadsheet:\n\n![](images/view_df.gif){fig-align=\"center\"}\n\n## Try It Yourself!\n\n- Open the CSV file to see what it looks like\n- Then use this code to read it into R and view it\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# load libraries\nlibrary(readr)\nlibrary(dplyr)\n\ndem_summary <- read_csv(\"data/dem_summary.csv\")\n\nglimpse(dem_summary)\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer1\" data-update-every=\"1\" tabindex=\"0\" style=\"right:10%;bottom:10%;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">05</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::\n\n\n# Bar Charts\n\n## The Grammar of Graphics\n\n::: {.incremental}\n- Data viz has a language with its own grammar\n- Basic components include:\n  - Data we are trying to visualize\n  - Aesthetics (dimensions)\n  - Geom (e.g. bar, line, scatter plot)\n  - Color scales\n  - Themes\n  - Annotations\n::: \n  \n## \n\n<br>\n\nLet's start with the first two, the data and the aesthetic...\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"6\"}\nlibrary(readr)\nlibrary(ggplot2)\n\ndem_summary <- read_csv(\"data/dem_summary.csv\")\n\nggplot(dem_summary, aes(x = region, y = polyarchy)) \n```\n:::\n\n\n##\n\nThis gives us the axes without any visualization:\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](week-2.1_files/figure-revealjs/barchart2-1.png){width=960}\n:::\n:::\n\n\n\n##\n\n<br>\n\nNow let's add a geom. In this case we want a bar chart so we *add* `geom_col()`.\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(dem_summary, aes(x = region, y = polyarchy)) + \n  geom_col()\n```\n:::\n\n\n## \n\nThat gets the idea across but looks a little depressing, so...\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](week-2.1_files/figure-revealjs/barchart4-1.png){width=960}\n:::\n:::\n\n\n## \n\n<br>\n\n...let's change the color of the bars by specifying `fill = \"steelblue\"`.\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nggplot(dem_summary, aes(x = region, y = polyarchy)) + \n  geom_col(fill = \"steelblue\")\n```\n:::\n\n\n## \n\nNote how color of original bars is simply overwritten:\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](week-2.1_files/figure-revealjs/barchart6-1.png){width=960}\n:::\n:::\n\n\n## \n\n<br>\n\nNow let's *add* some labels with the `labs()` function:\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3-8\"}\nggplot(dem_summary, aes(x = region, y = polyarchy)) + \n  geom_col(fill = \"steelblue\") +\n  labs(\n    x = \"Region\", \n    y = \"Avg. Polyarchy Score\", \n    title = \"Democracy by region, 1990 - present\", \n    caption = \"Source: V-Dem Institute\"\n    )\n```\n:::\n\n\n## \n\nAnd that gives us... \n\n\n::: {.cell}\n::: {.cell-output-display}\n![](week-2.1_files/figure-revealjs/barchart8-1.png){width=960}\n:::\n:::\n\n\n## \n\nNext, we reorder the bars with `fct_reorder()` from the `forcats` package. \n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"1\"}\nlibrary(forcats)\n\nggplot(dem_summary, aes(x = fct_reorder(region, -polyarchy), y = polyarchy)) +\n  geom_col(fill = \"steelblue\") + \n  labs(\n    x = \"Region\", \n    y = \"Avg. Polyarchy Score\", \n    title = \"Democracy by region, 1990 - present\", \n    caption = \"Source: V-Dem Institute\"\n    )\n```\n:::\n\n\n<br> \n\nNote that we could also use the base R `reorder()` function here.\n\n## \n\nThis way, we get a nice, visually appealing ordering of the bars according to levels of democracy...\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](week-2.1_files/figure-revealjs/barchart10-1.png){width=960}\n:::\n:::\n\n\n## \n\n<br>\n\nNow let's change the theme to `theme_minimal()`. \n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"8\"}\nggplot(dem_summary, aes(x = reorder(region, -polyarchy), y = polyarchy)) +\n  geom_col(fill = \"steelblue\") + \n  labs(\n    x = \"Region\", \n    y = \"Avg. Polyarchy Score\", \n    title = \"Democracy by region, 1990 - present\", \n    caption = \"Source: V-Dem Institute\"\n    ) + theme_minimal()\n```\n:::\n\n\n## \n\nGives us a clean, elegant look. \n\n\n::: {.cell}\n::: {.cell-output-display}\n![](week-2.1_files/figure-revealjs/barchart12-1.png){width=960}\n:::\n:::\n\n\n\n##\n\n<br>\n\nNote that you can also save your plot as an object to modify later.\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndem_bar_chart <- ggplot(dem_summary, aes(x = reorder(region, -polyarchy), y = polyarchy)) +\n  geom_col(fill = \"steelblue\")\n```\n:::\n\n\n##\n\nWhich gives us...\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndem_bar_chart\n```\n\n::: {.cell-output-display}\n![](week-2.1_files/figure-revealjs/barchart14-1.png){width=960}\n:::\n:::\n\n\n## \n\n<br> \n\nNow let's add back our labels... \n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndem_bar_chart <- dem_bar_chart +\n  labs(\n    x = \"Region\", \n    y = \"Avg. Polyarchy Score\", \n    title = \"Democracy by region, 1990 - present\", \n    caption = \"Source: V-Dem Institute\"\n    )\n```\n:::\n\n\n##\n\nSo now we have... \n\n\n::: {.cell}\n\n```{.r .cell-code}\ndem_bar_chart\n```\n\n::: {.cell-output-display}\n![](week-2.1_files/figure-revealjs/barchart16-1.png){width=960}\n:::\n:::\n\n\n## \n\n<br> \n\nAnd now we'll add back our theme...\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndem_bar_chart <- dem_bar_chart + theme_minimal()\n```\n:::\n\n\n##\n\nVoila! \n\n\n::: {.cell}\n\n```{.r .cell-code}\ndem_bar_chart\n```\n\n::: {.cell-output-display}\n![](week-2.1_files/figure-revealjs/barchart18-1.png){width=960}\n:::\n:::\n\n\n##\n\nChange the theme. There are many [themes](https://ggplot2.tidyverse.org/reference/ggtheme.html) to choose from.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndem_bar_chart + theme_bw()\n```\n\n::: {.cell-output-display}\n![](week-2.1_files/figure-revealjs/barchart19-1.png){width=960}\n:::\n:::\n\n\n## Your Turn!\n\n1. `glimpse()` the data\n2. Find a new variable to visualize\n3. Make a bar chart with it\n4. Change the [color](http://sape.inf.usi.ch/quick-reference/ggplot2/colour) of the bars\n5. Order the bars\n6. Add labels\n7. Add a [theme](https://ggplot2.tidyverse.org/reference/ggtheme.html)\n8. Try saving your plot as an object\n9. Then change the labels and/or theme\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer2\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">10</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::\n\n\n# Histograms\n\n## Purpose of Histograms\n\n- Histograms are used to visualize the distribution of a single variable\n- They are used for continuous variables (e.g., income, age, etc.)\n- A *continuous* variable is one that can take on any value within a range (e.g., 0.5, 1.2, 3.7, etc.)\n- A *discrete* variable is one that can only take on certain values (e.g., 1, 2, 3, etc.)\n- x-axis represents value of variable of interest\n- y-axis represents the frequency of that value\n\n## Example\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](week-2.1_files/figure-revealjs/histogram1-1.png){width=960}\n:::\n:::\n\n\n## Histogram Code\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"|1-2|4-6|8-10\"}\n# load data\ndem_women <- read_csv(\"data/dem_women.csv\")\n\n# filter to 2022\ndem_women_2022 <- dem_women |>\n  filter(year == 2022) \n\n# create histogram\nggplot(dem_women_2022, aes(x = flfp)) +\n  geom_histogram(fill = \"steelblue\") + \n  labs(\n    x = \"Percentage of Working Aged Women in Labor Force\",\n    y = \"Number of Countries\",\n    title = \"Female labor force participation rates, 2022\",\n    caption = \"Source: World Bank\"\n    ) + theme_minimal()\n```\n:::\n\n\n## Change Number of Bins\n\n<br>\n\nChange number of bins (bars) using `bins` or `binwidth` arguments (default number of bins = 30):\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nggplot(dem_women_2022, aes(x = flfp)) +\n  geom_histogram(bins = 50, fill = \"steelblue\") + \n  labs(\n    x = \"Percentage of Working Aged Women in Labor Force\",\n    y = \"Number of Countries\",\n    title = \"Female labor force participation rates, 2022\",\n    caption = \"Source: World Bank\"\n    ) + theme_minimal()\n```\n:::\n\n\n##\n\nAt 50 bins...\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](week-2.1_files/figure-revealjs/histogram4-1.png){width=960}\n:::\n:::\n\n\n##\n\nAt 100 bins...probably too many!\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](week-2.1_files/figure-revealjs/histogram5-1.png){width=960}\n:::\n:::\n\n\n## \n\n<br>\n\nUsing `binwidth` instead of `bins`... \n\n<br>\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nggplot(dem_women_2022, aes(x = flfp)) +\n  geom_histogram(binwidth = 2, fill = \"steelblue\") + \n  labs(\n    x = \"Percentage of Working Aged Women in Labor Force\",\n    y = \"Number of Countries\",\n    title = \"Female labor force participation rates, 2022\",\n    caption = \"Source: World Bank\"\n    ) + theme_minimal()\n```\n:::\n\n\n##\n\nSetting `binwidth` to 2...\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](week-2.1_files/figure-revealjs/histogram7-1.png){width=960}\n:::\n:::\n\n\n## Change from Count to Density\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"1,5\"}\nggplot(dem_women_2022, aes(after_stat(density), x = flfp)) +\n  geom_histogram(fill = \"steelblue\") + \n  labs(\n    x = \"Percentage of Working Aged Women in Labor Force\",\n    y = \"Density\",\n    title = \"Female labor force participation rates, 2022\",\n    caption = \"Source: World Bank\"\n    ) + theme_minimal()\n```\n:::\n\n\n## \n\nWhich gives us... \n\n\n::: {.cell}\n::: {.cell-output-display}\n![](week-2.1_files/figure-revealjs/histogram9-1.png){width=960}\n:::\n:::\n\n\n## Your Turn!\n\n1. Pick a variable that you want to explore the distribution of\n2. Make a histogram\n    a. Only specify `x = ` in `aes()`\n    b. Specify geom as `geom_histogram`\n3. Choose color for bars\n4. Choose appropriate labels\n5. Change number of bins\n6. Change from count to density\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer3\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">10</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::\n",
    "supporting": [
      "week-2.1_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/countdown-0.4.0/countdown.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/countdown-0.4.0/countdown.js\"></script>\n"
      ],
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}